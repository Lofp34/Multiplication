<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Entraînement aux Multiplications</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #2E3192, #1BFFFF);
            color: white;
        }
        .container {
            max-width: 500px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        button {
            background: #FFC107;
            color: black;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            border-radius: 30px;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        button:hover {
            background: #FF9800;
        }
        .result {
            font-size: 20px;
            margin-top: 20px;
            font-weight: bold;
        }
        input {
            font-size: 18px;
            padding: 10px;
            text-align: center;
            width: 80%;
            max-width: 250px;
            border-radius: 10px;
            border: none;
            outline: none;
            margin-top: 10px;
        }
        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin-top: 20px;
        }
        .progress-bar {
            height: 20px;
            width: 0%;
            background: #FFC107;
            border-radius: 10px;
            transition: width 0.5s;
        }
        .goal-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }
        .goal-indicator {
            font-size: 16px;
            font-weight: bold;
        }
        .error-popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>🚀 Apprends les Multiplications !</h2>
        <label for="digits">Nombre de chiffres :</label>
        <input type="number" id="digits" value="1" min="1" max="3" />
        <button onclick="updateQuestion()">OK</button>
        <p id="question"></p>
        <input type="number" id="answer" placeholder="Ta réponse" />
        <button onclick="checkAnswer()">Vérifier</button>
        <p class="result" id="result"></p>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="goal-container">
            <label for="goal">Objectif quotidien :</label>
            <input type="number" id="goal" value="10" min="1" />
            <button onclick="updateGoal()">Valider</button>
        </div>
        <p class="goal-indicator" id="goalIndicator">Objectif: 0/10</p>
        <div id="errorPopup" class="error-popup"></div>
    </div>
    <script>
        let num1, num2, correctAnswer, correctCount = 0, dailyGoal = 10;
        let dingSound = new Audio('https://www.myinstants.com/media/sounds/ding-sound-effect_2.mp3');

        function getRandomNumber(digits) {
            return Math.floor(Math.random() * (Math.pow(10, digits) - Math.pow(10, digits - 1))) + Math.pow(10, digits - 1);
        }

        function updateQuestion() {
            let digits = parseInt(document.getElementById("digits").value);
            num1 = getRandomNumber(digits);
            num2 = getRandomNumber(digits);
            correctAnswer = num1 * num2;
            document.getElementById("question").textContent = `Combien fait ${num1} × ${num2} ?`;
            document.getElementById("answer").value = "";
            document.getElementById("result").textContent = "";
            document.getElementById("answer").focus();
        }

        function checkAnswer() {
            let userAnswer = parseInt(document.getElementById("answer").value);
            if (userAnswer === correctAnswer) {
                document.getElementById("result").textContent = "✔️ Correct ! Bien joué !";
                document.getElementById("result").style.color = "lime";
                correctCount++;
                updateProgress();
                dingSound.play();
            } else {
                let errorPercentage = Math.abs(((userAnswer - correctAnswer) / correctAnswer) * 100).toFixed(2);
                showErrorPopup(`Erreur: ${errorPercentage}%`);
            }
            updateQuestion();
        }

        function showErrorPopup(message) {
            let popup = document.getElementById("errorPopup");
            popup.textContent = message;
            popup.style.display = "block";
            setTimeout(() => { popup.style.display = "none"; }, 1000);
        }

        function updateProgress() {
            let goal = parseInt(document.getElementById("goal").value);
            let progressPercentage = (correctCount / goal) * 100;
            document.getElementById("progressBar").style.width = progressPercentage + "%";
            document.getElementById("goalIndicator").textContent = `Objectif: ${correctCount}/${goal}`;
        }

        function updateGoal() {
            dailyGoal = parseInt(document.getElementById("goal").value);
            correctCount = 0;
            updateProgress();
        }

        updateQuestion();
    </script>
</body>
</html>
